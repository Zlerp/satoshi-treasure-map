<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Satoshi Treasure Map</title>
</head>
<body>


    <!--<div class="bg"></div>-->
    <div class="container-fluid h-100 px-0">
        <div class="grid-layout">
            <div class="side-bar p-2">

                <div class="content" data-content>
                   <div class="mb-2 d-flex align-items-center align-items-center">
                       <h5 class="mr-2 mb-0"><span data-key-num >Click on Key</span>: </h5> <p class="mb-0" data-key-aka></p>
                   </div>
                    <p>date: <span data-key-date></span></p>
                    <p>coordinates: <span data-key-cord></span></p>
                    <p>location: <span data-key-location></span></p>
                    <p>description: <span data-key-desc></span></p>
                </div>
                <a target="_blank" href="https://satoshistreasure.xyz/" class="about-the-game">About the hunt</a>

            </div>
            <div class="h-100 w-100" id="map"></div>
        </div>
    </div>















<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.4.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.9"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgV12N_EimxCAO3zJl0Ws0aZ0NZWQ0iWA&callback=initMap"
        async defer></script>
<script src="scripts.js"></script>

    <script>
        var map;
        function initMap() {

            var locations = [
                [   'Key 1', 42.360342, -71.087282,
                    '04/16/2019',
                    'Cambridge, Massachusetts',
                    'qr code found, scanned and password entered to unlock 1st key fragment.',
                    "The Jade Key"
                ],
                ['Key 1', 34.062628, -118.129485,
                    '04/16/2019',
                    'Monterey Park, California',
                    'qr code found, scanned and password entered to unlock 1st key fragment.',
                    "The Jade Key"
                ],
                ['Key 1', 40.758931, -73.985099,
                    '04/16/2019',
                    'Broadway, New York',
                    'qr code found, scanned and password entered to unlock 1st key fragment.',
                    "The Jade Key"
                ],
                ['Key 1', 37.784038, -122.417812,
                    '04/16/2019',
                    'San Francisco, California',
                    'qr code found, scanned and password entered to unlock 1st key fragment.',
                    "The Jade Key"
                ],
                ['Key 2', 39.93685, 116.45426,
                    '04/17/2019',
                    'Beijing Shi, China',
                    'qr code found, scanned and password entered to unlock 2nd key fragment.',
                    "The Bismuth Key"
                ],
                ['Key 2', 22.281185, 114.156715,
                    '04/17/2019',
                    'Queenâ€™s Road Central, Hong Kong',
                    'qr code found, scanned and password entered to unlock 2nd key fragment.',
                    "The Bismuth Key"
                ],
                ['Key 2', 35.654811, 139.748974,
                    '04/17/2019',
                    'Minato City, Japan',
                    'qr code found, scanned and password entered to unlock 2nd key fragment.',
                    "The Bismuth Key"
                ],
                ['Key 2', 37.583827, 127.031035,
                    '04/17/2019',
                    'Seoul, South Korea',
                    'qr code found, scanned and password entered to unlock 2nd key fragment.',
                    "The Bismuth Key"
                ],
                ['Key 3', 51.5082944, -0.2013407,
                    '04/17/2019',
                    'Notting Hill, London',
                    'qr code found, scanned and password entered to unlock 3rd key fragment.',
                    "Mamoru's Key"
                ],
                ['Key 3', 0.3474019, 32.6036514,
                    '04/17/2019',
                    'Kampala, Uganda',
                    'qr code found, scanned and password entered to unlock 3rd key fragment.',
                    "Mamoru's Key"
                ],
                ['Key 3', -33.8881323, 151.1901988,
                    '04/17/2019',
                    'Camperdown NSW, Australia',
                    'qr code found, scanned and password entered to unlock 3rd key fragment.',
                    "Mamoru's Key"
                ],
                ['Key 3', -34.596118, -58.373290,
                    '04/17/2019',
                    'Buenos Aires, Argentina',
                    'qr code found, scanned and password entered to unlock 3rd key fragment.',
                    "Mamoru's Key"
                ],
            ];

            var icon = './key.png';
            var map = new google.maps.Map(document.getElementById('map'), {
                center: new google.maps.LatLng(0, 0),
                zoom: Math.ceil(Math.log2($("#map").width())) - 8,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                minZoom: Math.ceil(Math.log2($("#map").width())) - 8,
                styles: [
                    {
                        "featureType": "administrative.country",
                        "elementType": "geometry.stroke",
                        "stylers": [
                            {
                                "visibility": "on"
                            },
                            {
                                "saturation": "54"
                            },
                            {
                                "lightness": "42"
                            },
                            {
                                "gamma": "5.98"
                            },
                            {
                                "weight": "0.95"
                            },
                            {
                                "color": "#006c2b"
                            }
                        ]
                    },
                    {
                        "featureType": "administrative.province",
                        "elementType": "geometry.stroke",
                        "stylers": [
                            {
                                "color": "#006c2b"
                            }
                        ]
                    },
                    {
                        "featureType": "landscape",
                        "elementType": "geometry.fill",
                        "stylers": [
                            {
                                "visibility": "simplified"
                            },
                            {
                                "saturation": "100"
                            },
                            {
                                "color": "#115f14"
                            }
                        ]
                    },
                    {
                        "featureType": "landscape.man_made",
                        "elementType": "all",
                        "stylers": [
                            {
                                "hue": "#007F1E"
                            },
                            {
                                "saturation": 100
                            },
                            {
                                "lightness": -72
                            },
                            {
                                "visibility": "on"
                            }
                        ]
                    },
                    {
                        "featureType": "landscape.natural",
                        "elementType": "all",
                        "stylers": [
                            {
                                "hue": "#00C72E"
                            },
                            {
                                "saturation": 100
                            },
                            {
                                "lightness": -59
                            },
                            {
                                "visibility": "on"
                            }
                        ]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "all",
                        "stylers": [
                            {
                                "hue": "#00A927"
                            },
                            {
                                "saturation": 100
                            },
                            {
                                "lightness": -58
                            },
                            {
                                "visibility": "on"
                            }
                        ]
                    },
                    {
                        "featureType": "road",
                        "elementType": "all",
                        "stylers": [
                            {
                                "hue": "#002C0A"
                            },
                            {
                                "saturation": 100
                            },
                            {
                                "lightness": -87
                            },
                            {
                                "visibility": "on"
                            }
                        ]
                    },
                    {
                        "featureType": "water",
                        "elementType": "all",
                        "stylers": [
                            {
                                "hue": "#001204"
                            },
                            {
                                "saturation": 100
                            },
                            {
                                "lightness": -95
                            },
                            {
                                "visibility": "on"
                            }
                        ]
                    }
                ]
            });

            var infowindow = new google.maps.InfoWindow;

            var marker, i;


            var $content = $('[data-content]');

            var counter = 0;
            var typedDate;
            var typedAka;
            var typedDesc;
            var typedLocation;
            var typedCord;

            for (i = 0; i < locations.length; i++) {
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                    icon: icon,
                    map: map
                });

                google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {



                        if (counter > 0){
                            typedDate.destroy();
                            typedAka.destroy();
                            typedCord.destroy();
                            typedLocation.destroy();
                            typedDesc.destroy();
                        }

                        var optionsAka = {
                            strings: [String(locations[i][6])],
                            typeSpeed: 20,
                            backSpeed: 10,
                            cursorChar: '_',
                            smartBackspace: false,
                            backDelay: 3000,
                            startDelay: 500,
                            onComplete: function(self) {
                                typedDate = new Typed("[data-key-date]", optionsDate);
                            }
                        }

                        var optionsDate = {
                            strings: [String(locations[i][3])],
                            typeSpeed: 20,
                            backSpeed: 10,
                            cursorChar: '_',
                            smartBackspace: false,
                            backDelay: 3000,
                            startDelay: 500,
                            onComplete: function(self) {
                                typedCord = new Typed("[data-key-cord]", optionsCord);
                            }
                        }

                        var optionsCord = {
                            strings: [String(locations[i][1]) + ', ' +String(locations[i][2])],
                            typeSpeed: 20,
                            backSpeed: 10,
                            cursorChar: '_',
                            smartBackspace: false,
                            backDelay: 3000,
                            startDelay: 500,
                            onComplete: function(self) {
                                typedLocation = new Typed("[data-key-location]", optionsLocation);
                            }
                        }

                        var optionsLocation = {
                            strings: [String(locations[i][4])],
                            typeSpeed: 20,
                            backSpeed: 10,
                            cursorChar: '_',
                            smartBackspace: false,
                            backDelay: 3000,
                            startDelay: 500,
                            onComplete: function(self) {
                                typedDesc = new Typed("[data-key-desc]", optionsDesc);
                            }
                        }

                        var optionsDesc = {
                            strings: [String(locations[i][5])],
                            typeSpeed: 20,
                            backSpeed: 10,
                            cursorChar: '_',
                            smartBackspace: false,
                            backDelay: 3000,
                            startDelay: 500,
                        }

                        typedAka = new Typed("[data-key-aka]", optionsAka);
                        $content.find('[data-key-num]').text(locations[i][0]);

                        counter++;

                    }
                })(marker, i));

                console.log(counter);

            }
        }
    </script>
</body>
</html>